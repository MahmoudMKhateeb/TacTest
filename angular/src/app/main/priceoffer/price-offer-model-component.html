<div
  bsModal
  #modal="bs-modal"
  class="modal fade modalSetPrice tachyonDialer {{ direction == 'rtl' ? ' rtl' : '' }}"
  tabindex="-1"
  role="dialog"
  aria-labelledby="modal"
  aria-hidden="true"
  [config]="{ backdrop: 'static' }"
>
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-body">
        <button type="button" class="close closeModal" data-dismiss="modal" (click)="close()" aria-label="Close">
          <i class="fas fa-times"></i>
        </button>
        <form class="contentSetPrice" #Form="ngForm" novalidate (ngSubmit)="sendOffer()">
          <div class="table-sendOffer">
            <table>
              <thead>
                <tr>
                  <th>
                    {{l('Price')}}
                  </th>
                  <th *ngIf="!feature.isEnabled('App.Carrier')">
                    <select name="CommissionType" [(ngModel)]="offer.commissionType" (change)="changeItemComissionValue();calculator()">
                      <option [value]="code.key" *ngFor="let code of priceOfferCommissionType">
                        {{ l(code.value) | localize }}
                      </option>
                    </select>
                  </th>
                  <th *ngIf="!feature.isEnabled('App.Carrier')">
                    {{l('Commission')}}
                  </th>

                  <th>
                    {{l('Qty')}}
                  </th>
                  <th>
                    {{l('Total')}}
                  </th>
                  <th *ngIf="!feature.isEnabled('App.Carrier')">
                    {{l('TotalCommission')}}
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <input
                      type="number"
                      minlength="1"
                      min="1"
                      (keypress)="numberOnly($event)"
                      name="itemPrice"
                      [(ngModel)]="offer.itemPrice"
                      (change)="calculator();"
                    />
                  </td>
                  <td *ngIf="!feature.isEnabled('App.Carrier')">
                    <input
                      type="number"
                      min="1"
                      class="ml-2"
                      placeholder="Value"
                      (change)="calculator();"
                      name="commissionPercentageOrAddValue"
                      [(ngModel)]="offer.commissionPercentageOrAddValue"
                    />
                  </td>
                  <td *ngIf="!feature.isEnabled('App.Carrier')">
                    {{offer.itemCommissionAmount}}
                  </td>
                  <td>
                    {{offer.quantity}}
                  </td>
                  <td>
                    <ng-template [ngIf]="offer.itemTotalAmount>0">
                      <span>{{offer.itemTotalAmount | number}}</span>
                      <span>{{l('SAR')}}</span>
                    </ng-template>
                  </td>
                  <td *ngIf="!feature.isEnabled('App.Carrier')">
                    <ng-template [ngIf]="offer.itemSubTotalAmountWithCommission>0">
                      <span>{{offer.itemSubTotalAmountWithCommission | number}}</span>
                      <span>{{l('SAR')}}</span>
                    </ng-template>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="divirCard"></div>
          <div class="table-vas" *ngIf="Items.length">
            <div *ngIf="!feature.isEnabled('App.Carrier')">
              <span class="titleVas">
                VAS
              </span>
              <div>
                <select name="vasCommissionType" [(ngModel)]="offer.vasCommissionType" (change)="changeVasComissionValue();calculator()">
                  <option [value]="code.key" *ngFor="let code of priceOfferCommissionType">
                    {{ l(code.value) | localize }}
                  </option>
                </select>
                <input
                  type="number"
                  min="1"
                  class="ml-2"
                  placeholder="Value"
                  name="vasCommissionPercentageOrAddValue"
                  [(ngModel)]="offer.vasCommissionPercentageOrAddValue"
                />
              </div>
            </div>
            <table>
              <thead>
                <tr>
                  <th>
                    {{l('Name')}}
                  </th>
                  <th>
                    {{l('Price')}}
                  </th>
                  <th>
                    {{l('Qty')}}
                  </th>
                  <th>
                    {{l('Total')}}
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of Items; let i = index">
                  <td>
                    {{item.itemName}}
                  </td>
                  <td>
                    <input
                      type="number"
                      [name]="'itemPrice' + i"
                      [(ngModel)]="item.itemPrice"
                      min="1"
                      (change)="calculatorItem(item)"
                      (keypress)="numberOnly($event)"
                    />
                  </td>
                  <td>
                    {{item.quantity}}
                  </td>
                  <td>
                    <ng-template [ngIf]="item.itemTotalAmount>0">
                      <span>{{item.itemTotalAmount | number}}</span>
                      <span>{{l('SAR')}}</span>
                    </ng-template>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="divirCard"></div>
          <div class="resultPrice">
            <div>
              <p>
                {{l('SubTotalAmount')}}
              </p>
              <p>
                <ng-template [ngIf]="offer.subTotalAmount>0">
                  <span>{{offer.subTotalAmount | number}}</span>
                  <span>{{l('SAR')}}</span>
                </ng-template>
              </p>
            </div>
            <div>
              <p>
                {{l('VatAmount')}}
              </p>
              <p>
                <ng-template [ngIf]="offer.vatAmount>0">
                  <span>{{offer.vatAmount | number}}</span>
                  <span>{{l('SAR')}}</span>
                </ng-template>
              </p>
            </div>
            <div>
              <p>
                {{l('TotalAmount')}}
              </p>
              <p>
                <ng-template [ngIf]="offer.totalAmount>0">
                  <span>{{offer.totalAmount | number}}</span>
                  <span>{{l('SAR')}}</span>
                </ng-template>
              </p>
            </div>
            <div *ngIf="feature.isEnabled('App.TachyonDealer') || !appSession.tenantId">
              <p>
                {{l('CommissionAmount')}}
              </p>
              <p>
                <span>{{offer.commissionAmount | number}}</span>
                <span>{{l('SAR')}}</span>
              </p>
            </div>
          </div>
          <div class="sendOffer">
            <button
              type="submit"
              class="btn btn-primary"
              [disabled]="!Form.form.valid"
              [buttonBusy]="saving"
              [busyText]="l('SavingWithThreeDot' | localize)"
            >
              <i class="fa fa-save"></i> <span>{{ 'SendOffer' | localize }}</span>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
