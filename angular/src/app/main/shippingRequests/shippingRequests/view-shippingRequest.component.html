<!--suppress XmlInvalidId -->
<div [@routerTransition]>
  <div class="content d-flex flex-column flex-column-fluid">
    <sub-header [breadcrumbs]="breadcrumbs" [title]="'ShippingRequestsView' | localize"></sub-header>

    <div [class]="containerClass">
      <div class="card card-custom gutter-b">
        <!--  start of card::form-->
        <div class="card-header">
          <h3 class="card-title">{{ l('truckDetails') }}</h3>
        </div>
        <!--  start of card::body-->
        <div class="card-body">
          <div class="row">
            <!--  start of truck::Details-->
            <div class="col-12">
              <div class="row">
                <div class="col-lg-6">
                  <label>{{ l('transportType') }}:</label>
                  <input
                    class="form-control"
                    type="text"
                    name="numberOfDrops"
                    value="{{ shippingRequestforView.transportTypeDisplayName }}"
                    disabled
                  />
                </div>

                <div class="col-lg-6">
                  <label>{{ l('truckType') }}:</label>
                  <input class="form-control" type="text" name="numberOfDrops" value="{{ shippingRequestforView.truckTypeDisplayName }}" disabled />
                </div>
                <div class="col-lg-6 mt-5">
                  <label>{{ l('capacity') }}:</label>
                  <input class="form-control" type="text" name="numberOfDrops" value="{{ shippingRequestforView.capacityDisplayName }}" disabled />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card card-custom gutter-b">
        <!--  start of card::form-->
        <div class="card-header">
          <h3 class="card-title">{{ l('ShippingRequestProperties') }}</h3>
        </div>
        <!--  start of card::body-->
        <div class="card-body">
          <div class="row">
            <!--  start of ShippingRequestType::Details-->
            <div class="col-12">
              <div class="mb-3">
                <div class="mb-2">
                  <div class="form-group row fv-plugins-icon-container">
                    <div class="col-lg-6">
                      <label>* {{ l('ShippingRequestType') }}:</label>
                      <input
                        class="form-control"
                        type="text"
                        name="ShippingRequestType"
                        value="{{ shippingRequestforView.shippingRequest.isBid ? l('Bid') : l('tachyondeal') }}"
                        disabled
                      />
                    </div>
                    <div *ngIf="shippingRequestforView.shippingRequest.isBid" class="col-lg-3">
                      <div class="form-group">
                        <label>* {{ l('biddingStartDate') }}:</label>
                        <div class="input-group date">
                          <input
                            class="form-control"
                            name="shippingrequestBidStratDate"
                            [(date)]="shippingRequestforView.shippingRequest.bidStartDate"
                            [disabled]="true"
                            bsDatepicker
                            datePickerMomentModifier
                          />
                          <div class="input-group-append">
                            <span class="input-group-text">
                              <i class="la la-calendar-check-o"></i>
                            </span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div *ngIf="shippingRequestforView.shippingRequest.isBid" class="col-lg-3">
                      <label>* {{ l('biddingEndDate') }}:</label>
                      <div class="input-group date">
                        <input
                          class="form-control"
                          placeholder="{{ l('biddingEndDate') }}"
                          name="shippingrequestBidEndDate"
                          [(date)]="shippingRequestforView.shippingRequest.bidEndDate"
                          [disabled]="true"
                          bsDatepicker
                          datePickerMomentModifier
                        />
                        <div class="input-group-append">
                          <span class="input-group-text">
                            <i class="la la-calendar-check-o"></i>
                          </span>
                        </div>
                      </div>
                    </div>
                    <!--  Start::Shipping Type                 -->
                    <div class="col-lg-6">
                      <label>* {{ l('shippingType') }}:</label>
                      <input class="form-control" type="text" name="ShippingType" [value]="shippingRequestforView.shippingTypeDisplayName" disabled />
                    </div>
                    <!-- End::Shipping Type-->
                  </div>
                </div>
              </div>
            </div>
            <!--  end::ShippingRequestType::Details-->
          </div>
        </div>
        <!--  end of card::body-->

        <!--  start of card::form-->
      </div>
      <div class="card card-custom gutter-b">
        <!--  start of card::form-->
        <div class="card-header">
          <h3 class="card-title">{{ l('GoodDetails') }}</h3>
        </div>
        <!--  start of card::body-->
        <div class="card-body">
          <div class="row">
            <!--  start of Shipment::Details-->
            <div class="col-12">
              <div class="mb-3">
                <div class="mb-2">
                  <div class="row">
                    <div class="col-lg-6">
                      <label>* {{ l('MainGoodCategory') }}:</label>
                      <input class="form-control" type="text" name="MainGoodCategory" [value]="shippingRequestforView.goodsCategoryName" disabled />
                    </div>
                    <div class="col-lg-6">
                      <label>* {{ l('totalWeight') }}:</label>
                      <div>
                        <div class="input-group">
                          <div class="input-group-append">
                            <span class="input-group-text">
                              KG
                            </span>
                          </div>
                          <input
                            type="number"
                            name="Weight"
                            class="form-control"
                            [value]="shippingRequestforView.shippingRequest.totalWeight"
                            disabled
                          />
                        </div>
                      </div>
                    </div>

                    <div class="col-lg-6 mt-4">
                      <div class="form-group">
                        <label> {{ l('packingType') }}:</label>
                        <input class="form-control" type="text" name="packingType" [value]="shippingRequestforView.packingTypeDisplayName" disabled />
                      </div>
                    </div>
                    <div class="col-lg-6 mt-4">
                      <div class="form-group">
                        <label> {{ l('numberOfPacking') }}:</label>
                        <input
                          class="form-control"
                          type="text"
                          name="numberOfPacking"
                          [value]="shippingRequestforView.shippingRequest.numberOfPacking"
                          disabled
                        />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!--  end of Shipment::Details-->
            <!--  Start:Goods details  -->
            <!--                (SelectedGoodDetailsFromChild)="shippingRequest.goodsDetailS = $event"-->
            <!--              <GoodDetailsForCreateShippingRequest [MainCategory]="shippingRequest.goodCategoryId"></GoodDetailsForCreateShippingRequest>-->
            <!--   end::Goods details   -->
          </div>
        </div>
      </div>

      <!--   start::RouteDetails     -->
      <div class="card card-custom gutter-b">
        <!--  start of card::form-->
        <div class="card-header">
          <h3 class="card-title">{{ l('routeDetails') }}</h3>
        </div>
        <!--  start of card::body-->
        <div class="card-body">
          <div class="row">
            <!--  start of Route::Details-->
            <div class="col-12">
              <div class="mb-3">
                <div class="mb-2">
                  <div class="row">
                    <!-- Start of Select Source -->
                    <div class="col-lg-6">
                      <div class="form-group">
                        <label> {{ l('originCity') }}:</label>
                        <input class="form-control" type="text" name="originCity" [value]="shippingRequestforView.originalCityName" disabled />
                      </div>
                    </div>
                    <div class="col-lg-6">
                      <div class="form-group">
                        <label> {{ l('destinationCity') }}:</label>
                        <input
                          class="form-control"
                          type="text"
                          name="destinationCity"
                          [value]="shippingRequestforView.destinationCityName"
                          disabled
                        />
                      </div>
                    </div>

                    <div class="col-lg-6">
                      <div class="form-group">
                        <label>* {{ l('startDate') }}:</label>
                        <div class="input-group date">
                          <input
                            [(date)]="shippingRequestforView.shippingRequest.startTripDate"
                            class="form-control"
                            type="datetime"
                            name="startdate"
                            bsDatepicker
                            datePickerMomentModifier
                            disabled
                          />

                          <div class="input-group-append">
                            <span class="input-group-text">
                              <i class="la la-calendar-check-o"></i>
                            </span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-6">
                      <div class="form-group">
                        <label>* {{ l('endDate') }}:</label>
                        <div class="input-group date">
                          <input
                            [(date)]="shippingRequestforView.shippingRequest.endTripDate"
                            class="form-control"
                            name="endDate"
                            placeholder="{{ l('endDate') }}"
                            bsDatepicker
                            datePickerMomentModifier
                            disabled
                          />
                          <div class="input-group-append">
                            <span class="input-group-text">
                              <i class="la la-calendar-check-o"></i>
                            </span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-3">
                      <label>{{ l('routeType') }}:</label>
                      <input class="form-control" type="text" name="routeType" [value]="shippingRequestforView.routTypeName" disabled />
                    </div>
                    <div class="col-lg-3">
                      <div class="form-group">
                        <label>* {{ l('numberOfDrops') }}:</label>
                        <input
                          class="form-control"
                          type="number"
                          name="numberOfDrops"
                          [value]="shippingRequestforView.shippingRequest.numberOfDrops"
                          disabled
                        />
                      </div>
                    </div>
                    <div class="col-lg-6">
                      <div class="form-group">
                        <label> {{ l('numberOfTrips') }}:</label>
                        <input
                          class="form-control"
                          type="number"
                          name="numberOfTrips"
                          [value]="shippingRequestforView.shippingRequest.numberOfTrips"
                          disabled
                        />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!--    Start::MapForViewShippingRequest-->
            <div class="col-lg-12 mymap">
              <agm-map [latitude]="24.717942" [longitude]="46.675761" [zoom]="14">
                <agm-direction
                  *ngIf="wayPointMapDest && wayPointMapSource"
                  [origin]="wayPointMapSource"
                  [destination]="wayPointMapDest"
                  [waypoints]="wayPoints"
                  [travelMode]="'DRIVING'"
                ></agm-direction>
              </agm-map>
            </div>
            <!--    End::MapForViewShippingRequest-->
          </div>
        </div>
        <!--  end of card::body-->
        <!--  start of card::form-->
      </div>
      <!--   End::RouteDetails     -->
      <!--   Start::Vas Section     -->
      <div class="card card-custom gutter-b">
        <!--  start of card::form-->
        <div class="card-header">
          <h3 class="card-title">{{ l('vasDetails') }}</h3>
        </div>
        <!--  start of card::body-->
        <div class="card-body">
          <!--  start of Vas::Details-->
          <div class="col-lg-12">
            <table *ngIf="shippingRequestforView.shippingRequestVasDtoList" class="table">
              <thead>
                <tr class="table-active">
                  <th scope="col">{{ l('name') }}</th>
                  <th scope="col">{{ l('count') }}</th>
                  <th scope="col">{{ l('amount') }}</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of shippingRequestforView.shippingRequestVasDtoList; index as i">
                  <td>
                    {{ item.vasName }}
                  </td>
                  <td>
                    <input
                      type="number"
                      [attr.disabled]="true"
                      id="Vas-Count{{ i }}"
                      [value]="item.shippingRequestVas.requestMaxCount"
                      class="form-control"
                      name="Vas-Count{{ i }}"
                    />
                  </td>
                  <td>
                    <input
                      type="number"
                      [attr.disabled]="true"
                      id="VasAmount2{{ i }}"
                      [value]="item.shippingRequestVas.requestMaxAmount"
                      class="form-control"
                      name="VasAmount2{{ i }}"
                    />
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <!--  end of Vas::Details-->
        </div>

        <!--  end of card::body-->

        <!--  start of card::form-->
      </div>
      <!--    End::Vas Section    -->

      <!--   Start::Bidding Section     -->
      <div class="card card-custom gutter-b" *ngIf="shippingRequestforView.shippingRequest.isBid">
        <!--  start of card::form-->
        <div class="card-header">
          <div class="card-title">
            <h3 class="card-label">
              {{ l('Bids List') }}
              <span class="d-block text-muted pt-2 font-size-sm">
                {{ l('All Bids on Shipping Request') }}: {{ shippingRequestforView.shippingRequest.id }}
              </span>
            </h3>
          </div>

          <div class="card-toolbar">
            <!--begin::Button-->

            <button class="btn btn-primary" (click)="CancelShippingRequestBid(shippingRequestforView.shippingRequest.id)">
              <i class="flaticon-close"></i> {{ l('StopBiddingOnthisRequest') }}
            </button>

            <!--end::Button-->
          </div>
        </div>
        <!--  start of card::body-->
        <div class="card-body">
          <div class="row align-items-center">
            <!--<Primeng-Datatable-Start>-->
            <div [busyIf]="primengTableHelper.isLoading" class="primeng-datatable-container col-12">
              <p-table
                #dataTablechild
                (onLazyLoad)="getShippingRequestsBids($event)"
                ScrollWidth="100%"
                [lazy]="true"
                [paginator]="false"
                [resizableColumns]="primengTableHelper.resizableColumns"
                [responsive]="primengTableHelper.isResponsive"
                [scrollable]="true"
                [value]="primengTableHelper.records"
                rows="{{ primengTableHelper.defaultRecordsCountPerPage }}"
              >
                <ng-template pTemplate="header">
                  <tr>
                    <th style="width: 130px;">
                      {{ l('id') }}
                    </th>
                    <th pSortableColumn="trucksTypeFk.displayName" style="width: 150px;">
                      {{ l('carrierName') }}
                      <p-sortIcon field="trucksTypeDisplayName"></p-sortIcon>
                    </th>
                    <th pSortableColumn="trucksTypeFk.displayName" style="width: 150px;">
                      {{ l('price') }}
                      <p-sortIcon field="trucksTypeDisplayName"></p-sortIcon>
                    </th>
                    <th pSortableColumn="trailerTypeFk.displayName" style="width: 150px;">
                      {{ l('Accepted') }}
                      <p-sortIcon field="trailerTypeDisplayName"></p-sortIcon>
                    </th>
                    <th pSortableColumn="goodsDetailFk.name" style="width: 150px;">
                      {{ l('Rejected') }}
                      <p-sortIcon field="goodsDetailName"></p-sortIcon>
                    </th>
                    <th pSortableColumn="routeFk.displayName" style="width: 150px;">
                      {{ l('cancledReason') }}
                      <p-sortIcon field="routeDisplayName"></p-sortIcon>
                    </th>
                    <th pSortableColumn="vas" style="width: 150px;">
                      {{ l('acceptedDate') }}
                      <p-sortIcon field="shippingRequest.vas"></p-sortIcon>
                    </th>
                    <th pSortableColumn="isBid" style="width: 150px;">
                      {{ l('canceledDate') }}
                      <p-sortIcon field="isBid"></p-sortIcon>
                    </th>
                    <th style="width: 130px;">
                      {{ l('Actions') }}
                    </th>
                  </tr>
                </ng-template>
                <ng-template let-record="$implicit" pTemplate="body">
                  <tr [ngClass]="record.isAccepted ? 'table-success' : ''">
                    <td style="width: 150px;">
                      <span class="ui-column-title"> {{ l('id') }}</span>
                      {{ record.id }}
                    </td>
                    <td style="width: 150px;">
                      <span class="ui-column-title"> {{ l('carrierName') }}</span>
                      {{ record.carrierName }}
                    </td>
                    <td style="width: 150px;">
                      <span class="ui-column-title"> {{ l('price') }}</span>
                      {{ record.price }}
                    </td>
                    <td style="width: 150px;">
                      <span class="ui-column-title"> {{ l('isAccepted') }}</span>
                      {{ record.isAccepted }}
                    </td>
                    <td style="width: 150px;">
                      <span class="ui-column-title"> {{ l('isRejected') }}</span>
                      {{ record.isRejected }}
                    </td>
                    <td style="width: 150px;">
                      <span class="ui-column-title"> {{ l('cancledReason') }}</span>
                      {{ record.cancledReason }}
                    </td>
                    <td style="width: 150px;">
                      <span class="ui-column-title"> {{ l('acceptedDate') }}</span>
                      {{ record.acceptedDate }}
                    </td>
                    <td style="width: 150px;">
                      <span class="ui-column-title"> {{ l('canceledDate') }}</span>
                      {{ record.canceledDate }}
                    </td>
                    <td style="width: 150px;">
                      <span class="ui-column-title"> {{ l('AcceptBid') }}</span>
                      <button type="button" class="btn btn-outline-success mr-2" (click)="AcceptBidMeth(record.id)">
                        {{ l('AcceptBid') }}
                      </button>
                    </td>
                  </tr>
                </ng-template>
              </p-table>
              <div *ngIf="primengTableHelper.totalRecordsCount == 0" class="primeng-no-data">
                {{ l('NoData') }}
              </div>
              <div class="primeng-paging-container">
                <p-paginator
                  #paginatorchild
                  (onPageChange)="getShippingRequestsBids($event)"
                  [rowsPerPageOptions]="primengTableHelper.predefinedRecordsCountPerPage"
                  [rows]="primengTableHelper.defaultRecordsCountPerPage"
                  [totalRecords]="primengTableHelper.totalRecordsCount"
                >
                </p-paginator>
                <span class="total-records-count">
                  {{ l('TotalRecordsCount', primengTableHelper.totalRecordsCount) }}
                </span>
              </div>
            </div>
            <!--<Primeng-Datatable-End>-->
          </div>
        </div>

        <!--  end of card::body-->

        <!--  start of card::form-->
      </div>
      <!--    End::Bidding Section    -->

      <!--  End of the First Container      -->
    </div>
    <!--    start::Btns   -->
    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-12 float-right mt-2">
          <!--              <button-->
          <!--                (click)="save()"-->
          <!--                [busyText]="l('SavingWithThreeDot')"-->
          <!--                [buttonBusy]="saving"-->
          <!--                [disabled]="!shippingRequestForm.form.valid"-->
          <!--                class="btn btn-danger font-weight-bold font-size-h6 px-10 float-right"-->
          <!--              >-->
          <!--                <i class="flaticon2-tag"></i>-->
          <!--                <span> {{ shippingRequest.id ? l('UpdateSippingRequest') : l('createShippingRequest') }}</span>-->
          <!--              </button>-->
        </div>
      </div>
    </div>
    <!--   end::Btns  -->
  </div>
</div>
