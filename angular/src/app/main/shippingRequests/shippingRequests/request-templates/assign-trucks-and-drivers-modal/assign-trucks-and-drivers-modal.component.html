<div
  #assignTrucksAndDriversModal="bs-modal"
  aria-hidden="true"
  aria-labelledby="AddNewEntityModalComponent"
  bsModal
  class="modal fade"
  role="dialog"
  tabindex="-10010"
>
  <div class="modal-dialog modal-lg">
    <div *ngIf="active" class="modal-content">
      <form #assignTrucksAndDriversForm="ngForm" novalidate (ngSubmit)="save()" autocomplete="off">
        <!--begin::Card-->
        <div class="card card-custom">
          <!--begin::Header-->
          <div class="card-header align-items-center px-4 py-3">
            <h3>{{ l('AssignDriversAndTrucksModal') }}</h3>
          </div>
          <!--end::Header-->
          <!--begin::Body-->
          <div class="card-body">
            <div class="form-group">
              <label>{{ l('Drivers') }}</label>
              <!--            <p-multiSelect-->
              <!--              #drivers="ngModel"-->
              <!--              dropdownIcon="fa fa-caret-down"-->
              <!--              name="drivers"-->
              <!--              [options]="allDrivers"-->
              <!--              [(ngModel)]="selectedDrivers"-->
              <!--              optionLabel="displayName"-->
              <!--              [class.is-valid]="drivers.valid && (drivers.dirty || drivers.touched)"-->
              <!--              [class.is-invalid]="drivers.invalid && (drivers.dirty || drivers.touched)"-->
              <!--              [selectedItemsLabel]="'{0} items selected'"-->
              <!--              [style]="{ width: '100%' }"-->
              <!--              styleClass="form-control pt-1"-->
              <!--              [dataKey]="'id'"-->
              <!--            >-->
              <!--            </p-multiSelect>-->
              <dx-tag-box [(value)]="selectedDrivers" [dataSource]="allDrivers" displayExpr="displayName" required>
                <!--                                valueExpr="id"-->
                <dx-validator [validationGroup]="'assignTrucksAndDrivers'">
                  <dxi-validation-rule
                    type="required"
                    message="{{ 'Drivers' | localize }}: {{ 'ThisFieldIsRequired' | localize }}"
                  ></dxi-validation-rule>
                  <dxi-validation-rule
                    type="async"
                    message="{{ 'Drivers' | localize }}: {{ 'SelectedItemsMustEqualTo' | localize }} {{ dedicatedShippingRequest?.numberOfTrucks }}"
                    [validationCallback]="asyncValidationOnNumberOfTrucks"
                  ></dxi-validation-rule>
                </dx-validator>
              </dx-tag-box>
            </div>
            <div class="form-group">
              <label>{{ l('Trucks') }}</label>
              <!--            <p-multiSelect-->
              <!--              #trucks="ngModel"-->
              <!--              dropdownIcon="fa fa-caret-down"-->
              <!--              name="trucks"-->
              <!--              [options]="allTrucks"-->
              <!--              [(ngModel)]="selectedTrucks"-->
              <!--              optionLabel="displayName"-->
              <!--              [class.is-valid]="drivers.valid && (drivers.dirty || drivers.touched)"-->
              <!--              [class.is-invalid]="drivers.invalid && (drivers.dirty || drivers.touched)"-->
              <!--              [selectedItemsLabel]="'{0} items selected'"-->
              <!--              [style]="{ width: '100%' }"-->
              <!--              styleClass="form-control pt-1"-->
              <!--              [dataKey]="'id'"-->
              <!--            >-->
              <!--            </p-multiSelect>-->
              <dx-tag-box [(value)]="selectedTrucks" [dataSource]="allTrucks" displayExpr="displayName" required>
                <!--                                valueExpr="id"-->
                <dx-validator [validationGroup]="'assignTrucksAndDrivers'">
                  <dxi-validation-rule
                    type="required"
                    message="{{ 'Trucks' | localize }}: {{ 'ThisFieldIsRequired' | localize }}"
                  ></dxi-validation-rule>
                  <dxi-validation-rule
                    type="async"
                    message="{{ 'Trucks' | localize }}: {{ 'SelectedItemsMustEqualTo' | localize }} {{ dedicatedShippingRequest?.numberOfTrucks }}"
                    [validationCallback]="asyncValidationOnNumberOfTrucks"
                  ></dxi-validation-rule>
                </dx-validator>
              </dx-tag-box>
            </div>
            <div class="row pt-4">
              <div class="col-12">
                <span class="text-danger">
                  {{ 'AssignDriversAndTrucksForDedicatedWarning' | localize }}
                </span>
              </div>
            </div>
            <div class="row pt-4">
              <div class="col-12">
                <dx-validation-summary validationGroup="assignTrucksAndDrivers" id="assign-trucks-and-drivers"></dx-validation-summary>
              </div>
            </div>
          </div>
          <!--end::Body-->
          <!--begin::Footer-->
          <div class="card-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="close()">{{ l('Close') }}</button>
            <!--          <button type="button" class="btn btn-primary" [disabled]="loading || selectedTrucks.length === 0 || selectedDrivers.length === 0">-->
            <!--            {{ l('Save') }}-->
            <!--          </button>-->
            <dx-button
              type="submit"
              class="btn btn-primary blue font-weight-bold py-3 px-3 no-padding-custom"
              icon="fa fa-save"
              text="{{ l('Save') }}"
              [useSubmitBehavior]="true"
              [validationGroup]="'assignTrucksAndDrivers'"
            >
            </dx-button>
          </div>
          <!--end::Footer-->
        </div>
      </form>
      <!--end::Card-->
    </div>
  </div>
</div>
