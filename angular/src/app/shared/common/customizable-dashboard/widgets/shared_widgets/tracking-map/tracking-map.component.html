<!--begin::Body-->
<div class="row bg-white p-2 w-100 h-100">
  <div class="col-lg-12">
    <agm-map
      minZoom="5"
      [longitude]="allDrivers[0]?.lng || 46.675761"
      [latitude]="allDrivers[0]?.lat || 24.717942"
      [scrollwheel]="false"
      (mapReady)="mapReady($event)"
    >
      <div id="Settings" class="rounded bg-white p-2" style="height: 50px">
        <div class="form-group row p-1">
          <label class="col-3 col-form-label">{{ l('Drivers') }}</label>
          <div class="col-3">
            <span class="switch switch-outline switch-icon switch-danger">
              <label>
                <input [(ngModel)]="driversToggle" type="checkbox" name="driversToggle" (click)="driverToggle()" />
                <span></span>
              </label>
            </span>
          </div>
          <label class="col-3 col-form-label">{{ l('Trips') }}</label>
          <div class="col-3">
            <span class="switch switch-outline switch-icon switch-danger">
              <label>
                <input [(ngModel)]="tripsToggle" type="checkbox" name="tripsToggle" (click)="tripToggle()" />
                <span></span>
              </label>
            </span>
          </div>
        </div>
      </div>
      <ng-container *ngIf="tripsToggle">
        <ng-container *ngFor="let direction of directions">
          <agm-direction
            *ngIf="direction.show"
            [origin]="direction.origin"
            [destination]="direction.destination"
            [waypoints]="direction.waypoints"
            [optimizeWaypoints]="false"
            [renderOptions]="direction.renderOptions"
          >
          </agm-direction>
        </ng-container>
      </ng-container>
      <ng-container *ngIf="driversToggle">
        <agm-marker *ngFor="let driver of allDrivers" [longitude]="driver.lng" [latitude]="driver.lat" [iconUrl]="trackingIconsList.driverIcon">
          <agm-info-window>
            <div class="d-flex flex-column">
              <div>
                <span class="font-weight-bold">{{ l('Driver') }}</span> : {{ driver.driverName }}
              </div>
              <div>
                <span class="font-weight-bold">{{ l('Waybill') }}</span> :
                <a href="javascript:;" [busyIf]="waybillDownloading" (click)="DownloadSingleDropWaybillPdf(driver.tripId)">{{
                  driver.waybillNumber
                }}</a>
              </div>
            </div>
          </agm-info-window>
        </agm-marker>
      </ng-container>
    </agm-map>
  </div>
  <div class="col-lg-12">
    <!--<Primeng-Datatable-Start>-->
    <div class="primeng-datatable-container col-12" [busyIf]="primengTableHelper.isLoading">
      <p-table
        #dataTable
        (onLazyLoad)="getTableRecords($event)"
        [value]="primengTableHelper.records"
        rows="{{ primengTableHelper.defaultRecordsCountPerPage }}"
        [paginator]="false"
        [lazy]="true"
        [scrollable]="true"
        ScrollWidth="100%"
        [responsive]="primengTableHelper.isResponsive"
        [resizableColumns]="primengTableHelper.resizableColumns"
      >
        <ng-template pTemplate="header">
          <tr>
            <th pSortableColumn="Source">
              {{ l('Source') }}
              <p-sortIcon field="Source"></p-sortIcon>
            </th>
            <th pSortableColumn="Destination">
              {{ l('Destination') }}
              <p-sortIcon field="Destination"></p-sortIcon>
            </th>
            <th pSortableColumn="WaybillNumber">
              {{ l('WaybillNumber') }}
              <p-sortIcon field="WaybillNumber"></p-sortIcon>
            </th>
            <th pSortableColumn="NumberOfDrops">
              {{ l('NumberOfDrops') }}
              <p-sortIcon field="NumberOfDrops"></p-sortIcon>
            </th>
            <th>{{ l('Show') }}</th>
            <th>{{ l('tag') }}</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-record="$implicit">
          <tr>
            <td>
              <span class="ui-column-title"> {{ l('Source') }}</span>
              {{ record.trackingMapDto?.originCity }}
            </td>
            <td>
              <span class="ui-column-title"> {{ l('Destination') }}</span>
              {{ record.trackingMapDto?.destinationCity }}
            </td>
            <td>
              <span class="ui-column-title"> {{ l('WaybillNumber') }}</span>
              {{ record.trackingMapDto?.wayBillNumber }}
            </td>
            <td>
              <span class="ui-column-title"> {{ l('NumberOfDrops') }}</span>
              {{ record.trackingMapDto?.routPoints?.length - 1 }}
            </td>
            <td>
              <span class="switch switch-sm">
                <label>
                  <input [(ngModel)]="record.show" type="checkbox" checked="checked" name="select" />
                  <span></span>
                </label>
              </span>
            </td>
            <td><i style="color: {{ record.color }}" class="icon-2x flaticon-add-label-button"></i></td>
          </tr>
        </ng-template>
      </p-table>
      <div class="primeng-no-data" *ngIf="primengTableHelper.totalRecordsCount == 0">
        {{ l('NoData') }}
      </div>
      <div class="primeng-paging-container">
        <p-paginator
          [rows]="primengTableHelper.defaultRecordsCountPerPage"
          #paginator
          (onPageChange)="getTableRecords($event)"
          [totalRecords]="primengTableHelper.totalRecordsCount"
          [rowsPerPageOptions]="primengTableHelper.predefinedRecordsCountPerPage"
        >
        </p-paginator>
        <span class="total-records-count">
          {{ l('TotalRecordsCount', primengTableHelper.totalRecordsCount) }}
        </span>
      </div>
    </div>
    <!--<Primeng-Datatable-End>-->
  </div>
</div>
